<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora de Gasto Calórico — AKT Labs</title>
  <style>
    :root{
      --bg:#0b0c10; --card:#13151a; --ink:#e8edf2; --muted:#a7b0bd; --accent:#f97316; --accent-2:#fb923c; --danger:#ef4444; --ok:#34d399;
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,#0b0c10 0%,#0e1116 100%);color:var(--ink);}
    .wrap{max-width:980px;margin:40px auto;padding:0 16px}
    header{display:flex;gap:14px;align-items:center;justify-content:space-between;margin-bottom:22px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:42px;height:42px;border-radius:12px;display:grid;place-items:center}
    .logo img{width:42px;height:42px;object-fit:contain;border-radius:12px}
    .logo .fallback{width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:grid;place-items:center;font-weight:800;color:#0b1020}
    h1{font-size: clamp(20px,2.4vw,32px);margin:0 0 6px}
    .sub{color:var(--muted);font-size:14px}

    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    .card{background:linear-gradient(180deg,#151922 0%, #10141c 100%);border:1px solid #1f2733;border-radius:var(--radius);padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .card h2{margin:0 0 12px;font-size:18px}

    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .row3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    @media (max-width:700px){.row,.row3{grid-template-columns:1fr}}

    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input,select{width:100%;padding:12px 12px;border-radius:12px;border:1px solid #273040;background:#0f141c;color:var(--ink);outline:none}
    input:focus,select:focus{border-color:var(--accent)}
    .hint{font-size:12px;color:var(--muted)}

    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .tab{padding:8px 12px;border-radius:999px;border:1px solid #223047;background:#0f141c;color:var(--ink);cursor:pointer;font-size:13px}
    .tab.active{background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#071018; border-color:transparent; font-weight:700}

    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    button{padding:10px 14px;border-radius:12px;border:1px solid #253044;background:#0f141c;color:var(--ink);cursor:pointer}
    button.primary{background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#071018; border-color:transparent;font-weight:800}
    button.ghost{background:transparent}

    .out{display:grid;gap:12px}
    .kpi{display:flex;align-items:center;justify-content:space-between;padding:14px;border-radius:14px;background:#0e1522;border:1px solid #1f2a3c}
    .kpi .v{font-size:22px;font-weight:800}

    .badge{font-size:11px;color:#071018;background:linear-gradient(135deg,var(--accent),var(--accent-2));padding:4px 8px;border-radius:999px;font-weight:700}

    .muted{color:var(--muted)}
    .warn{color:var(--danger); font-size:12px}
    .ok{color:var(--ok);font-size:12px}

    .foot{margin-top:16px;font-size:12px;color:var(--muted)}
    .sep{height:1px;background:#1b2331;margin:10px 0}
    .tiny{font-size:11px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">
          <img src="Logo fundo branco 01 (1) (1).png" alt="AKT Logo" onerror="this.outerHTML='<div class=\'fallback\'>AKT</div>'"/>
        </div>
        <div>
          <h1>Calculadora de Gasto Calórico</h1>
          <div class="sub">BMR e TDEE via Mifflin–St Jeor, Harris‑Benedict e Katch‑McArdle</div>
        </div>
      </div>
    </header>

    <div class="grid">
      <section class="card" id="inputs">
        <h2>Dados</h2>

        <div class="tabs" id="formulaTabs">
          <div class="tab active" data-formula="mifflin">Mifflin–St Jeor <span class="badge" title="Recomendado para sobrepeso/obesidade">sugerido</span></div>
          <div class="tab" data-formula="harris">Harris‑Benedict</div>
          <div class="tab" data-formula="katch">Katch‑McArdle</div>
        </div>

        <div class="row">
          <div>
            <label for="sex">Sexo</label>
            <select id="sex">
              <option value="male">Masculino</option>
              <option value="female">Feminino</option>
            </select>
          </div>
          <div>
            <label for="age">Idade (anos)</label>
            <input id="age" type="number" min="10" max="120" placeholder="28" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="height">Altura (cm)</label>
            <input id="height" type="number" min="120" max="230" placeholder="175" />
          </div>
          <div>
            <label for="weight">Peso (kg)</label>
            <input id="weight" type="number" min="30" max="300" step="0.1" placeholder="80" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="bf">Gordura corporal % <span class="tiny">(necessário para Katch‑McArdle)</span></label>
            <input id="bf" type="number" min="3" max="75" step="0.1" placeholder="15" />
          </div>
          <div>
            <label for="activity">Nível de atividade</label>
            <select id="activity">
              <option value="1.2">Sedentário (x1.2)</option>
              <option value="1.375">Leve: 1–3 treinos/sem (x1.375)</option>
              <option value="1.55" selected>Moderado: 3–5 treinos/sem (x1.55)</option>
              <option value="1.725">Alto: 6–7 treinos/sem (x1.725)</option>
              <option value="1.9">Extremo/Trabalho físico (x1.9)</option>
            </select>
          </div>
        </div>

        <div class="hint" id="formulaHint">Dica: para sobrepeso/obesidade priorize Mifflin–St Jeor. Se você já monitora % de gordura, Katch‑McArdle tende a ser mais preciso.</div>

        <div class="actions">
          <button class="primary" id="calcBtn">Calcular</button>
          <button class="ghost" id="resetBtn">Limpar</button>
          <button class="ghost" id="copyBtn">Copiar resultado</button>
        </div>
      </section>

      <aside class="card" id="outputs">
        <h2>Resultados</h2>
        <div class="out">
          <div class="kpi"><div>BMR (basal)</div><div class="v" id="bmr">—</div></div>
          <div class="kpi"><div>TDEE (gasto diário)</div><div class="v" id="tdee">—</div></div>
          <div class="sep"></div>
          <div class="row">
            <div>
              <label>Corte leve (~10%)</label>
              <div class="kpi"><div class="muted">Déficit</div><div class="v" id="cut10">—</div></div>
            </div>
            <div>
              <label>Superávit leve (~10%)</label>
              <div class="kpi"><div class="muted">Bulking</div><div class="v" id="bulk10">—</div></div>
            </div>
          </div>
          <div id="msg" class="tiny"></div>
        </div>
        <div class="foot">Estas fórmulas estimam gasto energético. Ajuste com base em peso corporal, fome, desempenho e marcadores semanais.</div>
      </aside>
    </div>
  </div>

  <script>
    const $ = (q)=>document.querySelector(q);
    const $$ = (q)=>document.querySelectorAll(q);

    // Tabs (seleção de fórmula)
    let currentFormula = 'mifflin';
    $$('#formulaTabs .tab').forEach(tab=>{
      tab.addEventListener('click',()=>{
        $$('#formulaTabs .tab').forEach(t=>t.classList.remove('active'));
        tab.classList.add('active');
        currentFormula = tab.dataset.formula;
        updateHint();
      });
    });

    function updateHint(){
      const hint = $('#formulaHint');
      if(currentFormula==='mifflin') hint.textContent = 'Mifflin–St Jeor: robusta e prática; boa escolha geral e sugerida em sobrepeso/obesidade.';
      if(currentFormula==='harris') hint.textContent = 'Harris‑Benedict: clássica; útil para comparação histórica com outras estimativas.';
      if(currentFormula==='katch') hint.textContent = 'Katch‑McArdle: usa Massa Magra (via % de gordura). Exige dado de %BF para maior precisão.';
    }

    function parse(v){
      const n = parseFloat(v);
      return Number.isFinite(n)? n : null;
    }

    function fmt(n){
      return Number.isFinite(n)? Math.round(n).toLocaleString('pt-BR') + ' kcal' : '—';
    }

    function calcBMR({formula, sex, age, height, weight, bf}){
      if(formula==='mifflin'){
        if(sex==='male') return 10*weight + 6.25*height - 5*age + 5;
        return 10*weight + 6.25*height - 5*age - 161;
      }
      if(formula==='harris'){
        if(sex==='male') return 88.362 + 13.397*weight + 4.799*height - 5.677*age;
        return 447.593 + 9.247*weight + 3.098*height - 4.330*age;
      }
      if(formula==='katch'){
        if(bf==null){ throw new Error('Para Katch‑McArdle informe % de gordura corporal.'); }
        const lbm = weight * (1 - bf/100);
        return 370 + 21.6*lbm;
      }
      throw new Error('Fórmula desconhecida');
    }

    function compute(){
      const sex = $('#sex').value;
      const age = parse($('#age').value);
      const height = parse($('#height').value);
      const weight = parse($('#weight').value);
      const bf = parse($('#bf').value);
      const activity = parse($('#activity').value) || 1.55;

      if(!age || !height || !weight){
        throw new Error('Preencha idade, altura e peso.');
      }

      const bmr = calcBMR({formula: currentFormula, sex, age, height, weight, bf});
      const tdee = bmr * activity;
      return {bmr, tdee};
    }

    function render(res){
      $('#bmr').textContent = fmt(res?.bmr);
      $('#tdee').textContent = fmt(res?.tdee);
      if(res){
        $('#cut10').textContent = fmt(res.tdee * 0.90);
        $('#bulk10').textContent = fmt(res.tdee * 1.10);
      } else {
        $('#cut10').textContent = '—';
        $('#bulk10').textContent = '—';
      }
    }

    function setMsg(txt, ok=false){
      const el = $('#msg');
      el.textContent = txt || '';
      el.className = 'tiny ' + (ok? 'ok' : 'warn');
    }

    $('#calcBtn').addEventListener('click', ()=>{
      try{
        const res = compute();
        render(res);
        setMsg('Estimativa pronta. Ajuste com dados semanais (peso, fome, desempenho).', true);
      }catch(e){
        render(null);
        setMsg(e.message,false);
      }
    });

    $('#resetBtn').addEventListener('click', ()=>{
      ['age','height','weight','bf'].forEach(id=>{$('#'+id).value='';});
      $('#activity').value='1.55';
      $('#sex').value='male';
      currentFormula='mifflin';
      $$('#formulaTabs .tab').forEach((t,i)=>t.classList.toggle('active', i===0));
      updateHint();
      render(null);
      setMsg('');
    });

    $('#copyBtn').addEventListener('click', ()=>{
      const bmr = $('#bmr').textContent; const tdee = $('#tdee').textContent;
      const c10 = $('#cut10').textContent; const b10 = $('#bulk10').textContent;
      const txt = `Resultados — ${new Date().toLocaleDateString('pt-BR')}\nFórmula: ${currentFormula.toUpperCase()}\nBMR: ${bmr}\nTDEE: ${tdee}\nCorte ~10%: ${c10}\nSuperávit ~10%: ${b10}`;
      navigator.clipboard?.writeText(txt).then(()=>setMsg('Copiado para a área de transferência.', true)).catch(()=>setMsg('Não foi possível copiar.')); 
    });

    updateHint();
  </script>
</body>
</html>
