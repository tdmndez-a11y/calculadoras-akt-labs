<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora de Projeção de Peso — AKT Labs</title>
  <style>
    :root{
      --bg:#0b0c10; --card:#13151a; --ink:#e8edf2; --muted:#a7b0bd; --accent:#f97316; --accent-2:#fb923c; --danger:#ef4444; --ok:#34d399; --line:#1f2733; --shade:#0f141c; --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background:linear-gradient(180deg,#0b0c10 0%,#0e1116 100%);
      color:var(--ink)
    }
    .wrap{
      max-width:1100px;
      margin:40px auto;
      padding:0 16px
    }
    header{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:16px;
      flex-wrap:wrap;
    }
    .logo{
      width:42px;
      height:42px;
      border-radius:12px;
      overflow:hidden;
      flex-shrink:0;
    }
    .logo img{
      width:42px;
      height:42px;
      object-fit:contain
    }
    h1{
      margin:0;
      font-size: clamp(20px,2.4vw,32px)
    }
    .sub{
      color:var(--muted);
      font-size:13px
    }

    .grid{
      display:grid;
      grid-template-columns:1.1fr .9fr;
      gap:18px
    }
    @media (max-width:980px){
      .grid{grid-template-columns:1fr}
    }

    .card{
      background:linear-gradient(180deg,#151922 0%, #10141c 100%);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:0 10px 30px rgba(0,0,0,.25)
    }
    .card h2{
      margin:0 0 12px;
      font-size:18px
    }
    .sep{
      height:1px;
      background:#1b2331;
      margin:10px 0
    }

    .row{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px
    }
    @media (max-width:780px){
      .row{grid-template-columns:1fr}
    }

    label{
      display:block;
      font-size:12px;
      color:var(--muted);
      margin-bottom:6px
    }
    input,select{
      width:100%;
      padding:12px;
      border-radius:12px;
      border:1px solid #273040;
      background:var(--shade);
      color:var(--ink);
      outline:none;
      font-size:14px;
    }
    input:focus,select:focus{border-color:var(--accent)}
    .hint{font-size:12px;color:var(--muted)}

    .tabs{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin:6px 0 12px
    }
    .tab{
      padding:8px 12px;
      border-radius:999px;
      border:1px solid #223047;
      background:var(--shade);
      color:var(--ink);
      cursor:pointer;
      font-size:13px;
      display:inline-flex;
      align-items:center;
      min-height:36px;
    }
    .tab.active{
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      color:#071018;
      border-color:transparent;
      font-weight:700
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px
    }
    button{
      padding:10px 14px;
      border-radius:12px;
      border:1px solid #253044;
      background:var(--shade);
      color:var(--ink);
      cursor:pointer;
      font-size:14px;
      min-height:44px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }
    button.primary{
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      color:#071018;
      border-color:transparent;
      font-weight:800
    }

    .kpi{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:14px;
      border-radius:14px;
      background:#0e1522;
      border:1px solid #1f2a3c;
      margin-bottom:10px;
      gap:8px;
    }
    .kpi .v{
      font-size:22px;
      font-weight:800
    }

    table{
      width:100%;
      border-collapse:collapse;
      border:1px solid var(--line);
      border-radius:12px;
      overflow:hidden;
      min-width:360px;
    }
    th,td{
      padding:10px;
      border-bottom:1px solid var(--line);
      text-align:left;
      font-size:13px;
    }
    th{
      background:#0f1524;
      color:#d7e0ea
    }
    tr:nth-child(even){background:#0e1320}

    .table-wrap{
      max-height:300px;
      overflow-y:auto;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
    }

    .tiny{
      font-size:11px;
      color:var(--muted)
    }
    .ok{color:var(--ok)}
    .warn{color:var(--danger)}

    /* Mobile tweaks */
    @media (max-width:600px){
      .wrap{
        margin:20px auto 24px;
        padding:0 12px;
      }
      header{
        flex-direction:column;
        align-items:flex-start;
        gap:10px;
      }
      .logo{
        width:36px;
        height:36px;
      }
      .logo img{
        width:36px;
        height:36px;
      }
      h1{
        font-size:20px;
      }
      .sub{
        font-size:12px;
      }
      .card{
        padding:14px;
      }
      .kpi{
        flex-direction:column;
        align-items:flex-start;
      }
      .kpi .v{
        font-size:20px;
      }
      .actions{
        flex-direction:column;
      }
      .actions button{
        width:100%;
      }
      th,td{
        padding:8px;
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">
        <img src="Logo fundo branco 01 (1) (1).png" alt="AKT Logo" onerror="this.style.display='none'"/>
      </div>
      <div>
        <h1>Calculadora de Projeção de Peso</h1>
        <div class="sub">Simule quantas semanas para chegar ao peso-alvo — perda ou ganho — por taxa semanal ou por déficit/superávit em kcal.</div>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <h2>Dados</h2>
        <div class="row">
          <div>
            <label for="startWeight">Peso atual (kg)</label>
            <input id="startWeight" type="number" min="25" max="400" step="0.1" placeholder="80">
          </div>
          <div>
            <label for="targetWeight">Peso alvo (kg)</label>
            <input id="targetWeight" type="number" min="25" max="400" step="0.1" placeholder="72">
          </div>
        </div>

        <div class="tabs" id="modeTabs">
          <div class="tab active" data-mode="rate">Por taxa semanal (kg/sem)</div>
          <div class="tab" data-mode="kcal">Por déficit/superávit diário (kcal)</div>
        </div>

        <div id="rateBox">
          <div class="row">
            <div>
              <label for="rate">Taxa planejada (kg por semana)</label>
              <input id="rate" type="number" min="0.05" max="2" step="0.01" placeholder="0.50">
            </div>
          </div>
        </div>

        <div id="kcalBox" style="display:none">
          <div class="row">
            <div>
              <label for="deltaKcal">Déficit/superávit diário (kcal)</label>
              <input id="deltaKcal" type="number" step="10" placeholder="-500">
            </div>
            <div>
              <label for="kcalPerKg">Equivalência kcal ↔ kg</label>
              <input id="kcalPerKg" type="number" step="50" value="7700">
            </div>
          </div>
        </div>

        <div class="actions">
          <button class="primary" id="calcBtn">Calcular</button>
          <button id="resetBtn">Limpar</button>
          <button id="copyBtn">Copiar resumo</button>
        </div>
        <div id="msg" class="tiny"></div>
      </section>

      <aside class="card">
        <h2>Projeção</h2>
        <div class="kpi"><div>Diferença total</div><div class="v" id="delta">—</div></div>
        <div class="kpi"><div>Semanas estimadas</div><div class="v" id="weeks">—</div></div>
        <div class="kpi"><div>Data estimada de término</div><div class="v" id="eta">—</div></div>
        <div class="sep"></div>
        <div class="tiny">Milestones semanais</div>
        <div class="table-wrap">
          <table id="milestones">
            <thead><tr><th>Semana</th><th>Data</th><th>Peso proj.</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </aside>
    </div>
  </div>

  <script>
    const $ = (q)=>document.querySelector(q);
    const $$ = (q)=>document.querySelectorAll(q);

    // Tabs modo
    let mode = 'rate';
    $$('#modeTabs .tab').forEach(tab=>{
      tab.addEventListener('click',()=>{
        $$('#modeTabs .tab').forEach(t=>t.classList.remove('active'));
        tab.classList.add('active');
        mode = tab.dataset.mode;
        $('#rateBox').style.display = mode==='rate' ? '' : 'none';
        $('#kcalBox').style.display = mode==='kcal' ? '' : 'none';
        setMsg('');
      })
    });

    function parse(v){
      const n = parseFloat(v);
      return Number.isFinite(n)?n:null;
    }

    function setMsg(txt, ok=false){
      const el=$('#msg');
      el.textContent=txt||'';
      el.className='tiny ' + (ok?'ok':'warn');
    }

    function weeksFromKcal(deltaDaily, kcalPerKg){
      if(!deltaDaily) return null;
      const kgPerDay = deltaDaily / kcalPerKg;
      const kgPerWeek = kgPerDay * 7;
      return kgPerWeek;
    }

    function compute(){
      const w0 = parse($('#startWeight').value);
      const wT = parse($('#targetWeight').value);
      if(!w0 || !wT) throw new Error('Informe peso atual e peso alvo.');
      const diff = wT - w0;
      if(diff === 0) throw new Error('Peso atual já é igual ao alvo.');

      let rateKgWeek;
      if(mode==='rate'){
        const rate = parse($('#rate').value);
        if(!rate) throw new Error('Informe a taxa semanal.');
        rateKgWeek = rate;
        if(Math.sign(diff) !== Math.sign(rateKgWeek)) rateKgWeek *= -1;
      } else {
        const deltaDaily = parse($('#deltaKcal').value);
        const kcalPerKg = parse($('#kcalPerKg').value) || 7700;
        if(!deltaDaily) throw new Error('Informe o déficit/superávit diário.');
        rateKgWeek = weeksFromKcal(deltaDaily, kcalPerKg);
      }

      if(rateKgWeek === 0) throw new Error('Taxa semanal efetiva zerada.');

      const weeksExact = Math.abs(diff / rateKgWeek);
      const startDate = new Date();
      const msPerWeek = 7*24*3600*1000;
      const eta = new Date(startDate.getTime() + Math.ceil(weeksExact)*msPerWeek);

      const tbody = $('#milestones tbody');
      tbody.innerHTML = '';
      const steps = Math.min(52, Math.ceil(weeksExact));
      for(let i=1;i<=steps;i++){
        const wi = w0 + rateKgWeek*i;
        const d  = new Date(startDate.getTime()+i*msPerWeek);
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${i}</td><td>${d.toLocaleDateString('pt-BR')}</td><td>${wi.toFixed(1)} kg</td>`;
        tbody.appendChild(tr);
      }

      return { diff, weeksExact, eta };
    }

    function render(r){
      $('#delta').textContent = r
        ? (r.diff>0?'+':'') + r.diff.toFixed(1) + ' kg'
        : '—';
      $('#weeks').textContent = r
        ? r.weeksExact.toFixed(1) + ' sem'
        : '—';
      $('#eta').textContent = r
        ? r.eta.toLocaleDateString('pt-BR')
        : '—';
    }

    $('#calcBtn').addEventListener('click',()=>{
      try{
        const r = compute();
        render(r);
        setMsg('Projeção gerada.', true);
      }catch(e){
        render(null);
        setMsg(e.message,false);
      }
    });

    $('#resetBtn').addEventListener('click',()=>{
      document.querySelectorAll('input').forEach(i=>i.value='');
      $('#milestones tbody').innerHTML='';
      render(null);
      setMsg('');
    });

    $('#copyBtn').addEventListener('click',()=>{
      const txt = `Projeção — ${new Date().toLocaleDateString('pt-BR')}\nDiferença: ${$('#delta').textContent}\nSemanas estimadas: ${$('#weeks').textContent}\nETA: ${$('#eta').textContent}`;
      navigator.clipboard?.writeText(txt)
        .then(()=>setMsg('Copiado.',true))
        .catch(()=>setMsg('Não foi possível copiar.'));
    });
  </script>
</body>
</html>
          </div>
        </div>

        <div class="tabs" id="modeTabs">
          <div class="tab active" data-mode="rate">Por taxa semanal (kg/sem)</div>
          <div class="tab" data-mode="kcal">Por déficit/superávit diário (kcal)</div>
        </div>

        <div id="rateBox">
          <div class="row">
            <div>
              <label for="rate">Taxa planejada (kg por semana)</label>
              <input id="rate" type="number" min="0.05" max="2" step="0.01" placeholder="0.50">
            </div>
          </div>
        </div>

        <div id="kcalBox" style="display:none">
          <div class="row">
            <div>
              <label for="deltaKcal">Déficit/superávit diário (kcal)</label>
              <input id="deltaKcal" type="number" step="10" placeholder="-500">
            </div>
            <div>
              <label for="kcalPerKg">Equivalência kcal ↔ kg</label>
              <input id="kcalPerKg" type="number" step="50" value="7700">
            </div>
          </div>
        </div>

        <div class="actions">
          <button class="primary" id="calcBtn">Calcular</button>
          <button id="resetBtn">Limpar</button>
          <button id="copyBtn">Copiar resumo</button>
        </div>
        <div id="msg" class="tiny"></div>
      </section>

      <aside class="card">
        <h2>Projeção</h2>
        <div class="kpi"><div>Diferença total</div><div class="v" id="delta">—</div></div>
        <div class="kpi"><div>Semanas estimadas</div><div class="v" id="weeks">—</div></div>
        <div class="kpi"><div>Data estimada de término</div><div class="v" id="eta">—</div></div>
        <div class="sep"></div>
        <div class="tiny">Milestones semanais</div>
        <div style="max-height:300px;overflow:auto">
          <table id="milestones">
            <thead><tr><th>Semana</th><th>Data</th><th>Peso proj.</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </aside>
    </div>
  </div>

  <script>
    const $ = (q)=>document.querySelector(q);
    const $$ = (q)=>document.querySelectorAll(q);

    // Tabs modo
    let mode = 'rate';
    $$('#modeTabs .tab').forEach(tab=>{
      tab.addEventListener('click',()=>{
        $$('#modeTabs .tab').forEach(t=>t.classList.remove('active'));
        tab.classList.add('active');
        mode = tab.dataset.mode;
        $('#rateBox').style.display = mode==='rate' ? '' : 'none';
        $('#kcalBox').style.display = mode==='kcal' ? '' : 'none';
        setMsg('');
      })
    });

    function parse(v){ const n = parseFloat(v); return Number.isFinite(n)?n:null; }

    function setMsg(txt, ok=false){ const el=$('#msg'); el.textContent=txt||''; el.className='tiny ' + (ok?'ok':'warn'); }

    function weeksFromKcal(deltaDaily, kcalPerKg){
      if(!deltaDaily) return null;
      const kgPerDay = deltaDaily / kcalPerKg;
      const kgPerWeek = kgPerDay * 7;
      return kgPerWeek;
    }

    function compute(){
      const w0 = parse($('#startWeight').value);
      const wT = parse($('#targetWeight').value);
      if(!w0 || !wT) throw new Error('Informe peso atual e peso alvo.');
      const diff = wT - w0;
      if(diff === 0) throw new Error('Peso atual já é igual ao alvo.');

      let rateKgWeek;
      if(mode==='rate'){
        const rate = parse($('#rate').value);
        if(!rate) throw new Error('Informe a taxa semanal.');
        rateKgWeek = rate;
        if(Math.sign(diff) !== Math.sign(rateKgWeek)) rateKgWeek *= -1;
      } else {
        const deltaDaily = parse($('#deltaKcal').value);
        const kcalPerKg = parse($('#kcalPerKg').value) || 7700;
        if(!deltaDaily) throw new Error('Informe o déficit/superávit diário.');
        rateKgWeek = weeksFromKcal(deltaDaily, kcalPerKg);
      }

      if(rateKgWeek === 0) throw new Error('Taxa semanal efetiva zerada.');

      const weeksExact = Math.abs(diff / rateKgWeek);
      const startDate = new Date();
      const msPerWeek = 7*24*3600*1000;
      const eta = new Date(startDate.getTime() + Math.ceil(weeksExact)*msPerWeek);

      const tbody = $('#milestones tbody');
      tbody.innerHTML = '';
      const steps = Math.min(52, Math.ceil(weeksExact));
      for(let i=1;i<=steps;i++){
        const wi = w0 + rateKgWeek*i;
        const d  = new Date(startDate.getTime()+i*msPerWeek);
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${i}</td><td>${d.toLocaleDateString('pt-BR')}</td><td>${wi.toFixed(1)} kg</td>`;
        tbody.appendChild(tr);
      }

      return { diff, weeksExact, eta };
    }

    function render(r){
      $('#delta').textContent = (r?.diff>0?'+':'') + (r? r.diff.toFixed(1): '—') + ' kg';
      $('#weeks').textContent = r? r.weeksExact.toFixed(1) + ' sem' : '—';
      $('#eta').textContent = r? r.eta.toLocaleDateString('pt-BR') : '—';
    }

    $('#calcBtn').addEventListener('click',()=>{
      try{ const r = compute(); render(r); setMsg('Projeção gerada.', true);}catch(e){ render(null); setMsg(e.message,false);} });
    $('#resetBtn').addEventListener('click',()=>{ document.querySelectorAll('input').forEach(i=>i.value=''); $('#milestones tbody').innerHTML=''; render(null); setMsg(''); });
    $('#copyBtn').addEventListener('click',()=>{
      const txt = `Projeção — ${new Date().toLocaleDateString('pt-BR')}\nDiferença: ${$('#delta').textContent}\nSemanas estimadas: ${$('#weeks').textContent}\nETA: ${$('#eta').textContent}`;
      navigator.clipboard?.writeText(txt).then(()=>setMsg('Copiado.',true)).catch(()=>setMsg('Não foi possível copiar.'));
    });
  </script>
</body>
</html>
