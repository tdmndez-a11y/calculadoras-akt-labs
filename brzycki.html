<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AKT Labs — Calculadora de Cargas (Brzycki)</title>

  <style>
    :root {
      --bg: #05060a;
      --panel: #0f131b;
      --panel2: #121826;
      --ink: #e8edf2;
      --muted: #a7b0bd;
      --accent: #f97316;
      --accent-2: #fb923c;
      --line: #1f2733;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #111827 0, #020617 55%);
      color: var(--ink);
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .wrap {
      width: 100%;
      max-width: 960px;
      background: var(--panel);
      border-radius: 18px;
      padding: 18px;
      border: 1px solid #1f2937;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
    }

    header {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 16px;
    }

    .logo {
      width: 46px;
      height: 46px;
      border-radius: 14px;
      overflow: hidden;
      background: #fff;
      flex-shrink: 0;
    }

    .logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    h1 {
      margin: 0;
      font-size: clamp(18px, 3vw, 24px);
    }

    .sub {
      font-size: 12px;
      color: var(--muted);
      margin-top: 2px;
    }

    .grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 14px;
    }

    @media (max-width: 780px) {
      .grid {
        grid-template-columns: 1fr;
      }
      .wrap {
        padding: 14px;
        border-radius: 14px;
      }
      header {
        flex-direction: column;
        align-items: flex-start;
      }
    }

    .card {
      background: radial-gradient(circle at top left, rgba(249, 115, 22, 0.08), transparent 60%),
        var(--panel2);
      border-radius: 14px;
      padding: 14px;
      border: 1px solid var(--line);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
    }

    .card h2 {
      margin: 0 0 10px;
      font-size: 16px;
    }

    .row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-bottom: 10px;
    }

    @media (max-width: 780px) {
      .row {
        grid-template-columns: 1fr;
      }
    }

    label {
      display: block;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
    }

    input,
    select {
      width: 100%;
      padding: 10px 11px;
      border-radius: 12px;
      border: 1px solid #273040;
      background: #020617;
      color: var(--ink);
      font-family: inherit;
      font-size: 14px;
      outline: none;
    }

    input:focus,
    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(249, 115, 22, 0.3);
    }

    .tiny {
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }

    .actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    button {
      padding: 9px 14px;
      border-radius: 12px;
      border: 1px solid #253044;
      background: #020617;
      color: var(--ink);
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
    }

    button.primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #0b0b11;
      border-color: transparent;
      font-weight: 700;
    }

    button:hover {
      filter: brightness(1.05);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      border: 1px solid var(--line);
      border-radius: 12px;
      overflow: hidden;
      font-size: 13px;
    }

    th,
    td {
      padding: 8px 9px;
      border-bottom: 1px solid var(--line);
      text-align: left;
    }

    th {
      background: #0f172a;
      color: #d7e0ea;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-size: 11px;
    }

    tr:nth-child(even) {
      background: #020617;
    }

    .kpi {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px;
      border-radius: 12px;
      background: #020617;
      border: 1px solid #1f2937;
      margin-bottom: 8px;
    }

    .kpi .v {
      font-size: 20px;
      font-weight: 800;
    }

    .ok {
      color: #22c55e;
    }

    .warn {
      color: #f97316;
    }

    .sep {
      height: 1px;
      background: var(--line);
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">
        <img
          src="Logo fundo branco 01 (1) (1).png"
          alt="AKT Logo"
          onerror="this.style.display='none'"
        />
      </div>
      <div>
        <h1>Calculadora de Cargas — Brzycki</h1>
        <div class="sub">
          Estime 1RM e cargas por % ou reps usando a equação de Brzycki, com arredondamento para a menor
          anilha da academia.
        </div>
      </div>
    </header>

    <div class="grid">
      <!-- ENTRADAS -->
      <section class="card">
        <h2>Entradas</h2>

        <div class="row">
          <div>
            <label for="unit">Unidade</label>
            <select id="unit">
              <option value="kg">kg</option>
              <option value="lb">lb</option>
            </select>
          </div>
          <div>
            <label for="rounding">Menor anilha da sua academia</label>
            <select id="rounding">
              <option value="0.5">0,5</option>
              <option value="1">1</option>
              <option value="2.5" selected>2,5</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="lifted">Carga levantada (unidade)</label>
            <input id="lifted" type="number" min="1" step="0.5" placeholder="100" />
          </div>
          <div>
            <label for="reps">Reps realizadas</label>
            <input id="reps" type="number" min="1" max="20" step="1" placeholder="6" />
          </div>
        </div>

        <div class="tiny">
          Fórmula de Brzycki: <code>1RM = Peso × 36 / (37 − reps)</code>. Melhor precisão até ~10–12 reps.
        </div>

        <div class="actions">
          <button class="primary" id="calcBtn">Calcular</button>
          <button id="resetBtn">Limpar</button>
          <button id="copyBtn">Copiar resumo</button>
        </div>

        <div id="msg" class="tiny"></div>
      </section>

      <!-- SAÍDAS -->
      <aside class="card">
        <h2>Resultados</h2>

        <div class="kpi">
          <div>1RM estimado</div>
          <div class="v" id="oneRM">—</div>
        </div>

        <div class="kpi">
          <div>Carga para o alvo</div>
          <div class="v" id="targetLoad">—</div>
        </div>

        <div class="row" style="margin-top: 8px">
          <div>
            <label for="targetPct">Alvo por % do 1RM</label>
            <input id="targetPct" type="number" min="30" max="100" step="1" placeholder="80" />
          </div>
          <div>
            <label for="targetReps">Alvo por reps</label>
            <input id="targetReps" type="number" min="1" max="20" step="1" placeholder="5" />
          </div>
        </div>

        <div class="tiny">
          Preencha <strong>%</strong> ou <strong>reps</strong> para ver a carga sugerida.  
          A conversão reps ↔ % também usa Brzycki.
        </div>

        <div class="sep"></div>

        <h2 style="margin-top: 4px">Tabela por zonas</h2>
        <div style="max-height: 340px; overflow: auto; margin-top: 6px">
          <table id="tableZones">
            <thead>
              <tr>
                <th>% 1RM</th>
                <th>Reps estimadas</th>
                <th>Carga</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </aside>
    </div>
  </div>

  <script>
    const $ = (q) => document.querySelector(q);

    function roundTo(x, step) {
      return Math.round(x / step) * step;
    }

    function brzycki1RM(w, r) {
      if (r <= 0 || r >= 37) return NaN;
      return (w * 36) / (37 - r);
    }

    function pctFromReps(r) {
      return (37 - r) / 36;
    }

    function repsFromPct(p) {
      return 37 - 36 * p;
    }

    function fmtLoad(x) {
      const step = parseFloat($("#rounding").value) || 1;
      const v = roundTo(x, step);
      const u = $("#unit").value;
      return Number.isFinite(v) ? v.toFixed(1) + " " + u : "—";
    }

    function compute() {
      const lifted = parseFloat($("#lifted").value);
      const reps = parseInt($("#reps").value);

      if (!lifted || !reps) throw new Error("Informe carga e reps.");
      const oneRM = brzycki1RM(lifted, reps);
      if (!Number.isFinite(oneRM)) throw new Error("Reps fora de intervalo válido para Brzycki.");

      const pct = parseFloat($("#targetPct").value);
      const repsT = parseInt($("#targetReps").value);
      let target = null;

      if (pct) {
        target = oneRM * (pct / 100);
      } else if (repsT) {
        target = oneRM * pctFromReps(repsT);
      }

      const tbody = $("#tableZones tbody");
      tbody.innerHTML = "";

      const unit = $("#unit").value;
      const step = parseFloat($("#rounding").value) || 1;

      for (let p = 100; p >= 50; p -= 5) {
        const perc = p / 100;
        let rEst = Math.round(Math.max(1, Math.min(20, repsFromPct(perc))));
        const w = roundTo(oneRM * perc, step);
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${p}%</td><td>${rEst}</td><td>${w.toFixed(1)} ${unit}</td>`;
        tbody.appendChild(tr);
      }

      return { oneRM, target };
    }

    function render(res) {
      $("#oneRM").textContent = res ? fmtLoad(res.oneRM) : "—";
      $("#targetLoad").textContent = res && res.target ? fmtLoad(res.target) : "—";
    }

    function setMsg(text, ok = false) {
      const el = $("#msg");
      el.textContent = text || "";
      el.className = "tiny " + (ok ? "ok" : "warn");
    }

    $("#calcBtn").addEventListener("click", () => {
      try {
        const r = compute();
        render(r);
        setMsg("Cálculo concluído.", true);
      } catch (e) {
        render(null);
        setMsg(e.message, false);
      }
    });

    $("#resetBtn").addEventListener("click", () => {
      document.querySelectorAll("input").forEach((i) => (i.value = ""));
      $("#tableZones tbody").innerHTML = "";
      render(null);
      setMsg("");
    });

    $("#copyBtn").addEventListener("click", () => {
      const t = `Brzycki — ${new Date().toLocaleDateString("pt-BR")}
1RM: ${$("#oneRM").textContent}
Alvo: ${$("#targetLoad").textContent}`;
      navigator.clipboard
        ?.writeText(t)
        .then(() => setMsg("Copiado para a área de transferência.", true))
        .catch(() => setMsg("Erro ao copiar.", false));
    });
  </script>
</body>
</html>
