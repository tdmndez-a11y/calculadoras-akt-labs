<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora de Percentual de Gordura — AKT Labs</title>
  <style>
    :root{
      --bg:#0b0c10; --card:#13151a; --ink:#e8edf2; --muted:#a7b0bd; --accent:#f97316; --accent-2:#fb923c; --danger:#ef4444; --ok:#34d399; --line:#1f2733;
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,#0b0c10 0%,#0e1116 100%);color:var(--ink)}
    .wrap{max-width:1000px;margin:40px auto;padding:0 16px}
    header{display:flex;gap:12px;align-items:center;margin-bottom:16px}
    .logo{width:42px;height:42px;border-radius:12px;overflow:hidden}
    .logo img{width:42px;height:42px;object-fit:contain}
    h1{margin:0;font-size: clamp(20px,2.4vw,32px)}
    .sub{color:var(--muted);font-size:13px}

    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    .card{background:linear-gradient(180deg,#151922 0%, #10141c 100%);border:1px solid var(--line);border-radius:var(--radius);padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .card h2{margin:0 0 12px;font-size:18px}
    .sep{height:1px;background:#1b2331;margin:10px 0}

    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .tab{padding:8px 12px;border-radius:999px;border:1px solid #223047;background:#0f141c;color:var(--ink);cursor:pointer;font-size:13px}
    .tab.active{background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#071018; border-color:transparent; font-weight:700}

    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .row3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    @media (max-width:780px){.row,.row3{grid-template-columns:1fr}}

    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input,select{width:100%;padding:12px;border-radius:12px;border:1px solid #273040;background:#0f141c;color:var(--ink);outline:none}
    input:focus,select:focus{border-color:var(--accent)}
    .hint{font-size:12px;color:var(--muted)}

    .kpi{display:flex;align-items:center;justify-content:space-between;padding:14px;border-radius:14px;background:#0e1522;border:1px solid #1f2a3c}
    .kpi .v{font-size:22px;font-weight:800}
    .badge{font-size:11px;color:#071018;background:linear-gradient(135deg,var(--accent),var(--accent-2));padding:4px 8px;border-radius:999px;font-weight:700}
    .chip{display:inline-block;padding:4px 8px;border-radius:999px;border:1px solid #2a3548;background:#0f141c;font-size:12px}

    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    button{padding:10px 14px;border-radius:12px;border:1px solid #253044;background:#0f141c;color:var(--ink);cursor:pointer}
    button.primary{background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#071018; border-color:transparent;font-weight:800}

    .ok{color:var(--ok);font-size:12px}
    .warn{color:var(--danger);font-size:12px}
    .tiny{font-size:11px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo"><img src="Logo fundo branco 01 (1) (1).png" alt="AKT Logo" onerror="this.style.display='none'"/></div>
      <div>
        <h1>Calculadora de % de Gordura</h1>
        <div class="sub">Jackson–Pollock 7 dobras e método 9 dobras (Parrillo) • Saída: %BF, Massa Magra e Massa Gorda</div>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <h2>Dados</h2>
        <div class="tabs" id="methodTabs">
          <div class="tab active" data-method="jp7">Pollock 7 dobras</div>
          <div class="tab" data-method="p9">9 dobras (Parrillo)</div>
        </div>

        <div class="row">
          <div>
            <label for="sex">Sexo</label>
            <select id="sex">
              <option value="male">Masculino</option>
              <option value="female">Feminino</option>
            </select>
          </div>
          <div>
            <label for="age">Idade (anos)</label>
            <input id="age" type="number" min="10" max="100" placeholder="28" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="weight">Peso (kg)</label>
            <input id="weight" type="number" min="30" max="300" step="0.1" placeholder="80" />
          </div>
          <div>
            <label for="unit">Unidade das dobras</label>
            <select id="unit"><option value="mm" selected>mm (adipômetro)</option></select>
          </div>
        </div>

        <!-- POLLOCK 7 SITES -->
        <div id="jp7-sites">
          <div class="sep"></div>
          <div class="row3">
            <div><label for="jp7_chest">Peitoral (mm)</label><input id="jp7_chest" type="number" min="1" step="0.1"></div>
            <div><label for="jp7_axilla">Axilar média (mm)</label><input id="jp7_axilla" type="number" min="1" step="0.1"></div>
            <div><label for="jp7_triceps">Tríceps (mm)</label><input id="jp7_triceps" type="number" min="1" step="0.1"></div>
            <div><label for="jp7_subscap">Subescapular (mm)</label><input id="jp7_subscap" type="number" min="1" step="0.1"></div>
            <div><label for="jp7_abd">Abdômen (mm)</label><input id="jp7_abd" type="number" min="1" step="0.1"></div>
            <div><label for="jp7_supra">Supra-ilíaca (mm)</label><input id="jp7_supra" type="number" min="1" step="0.1"></div>
            <div><label for="jp7_thigh">Coxa (mm)</label><input id="jp7_thigh" type="number" min="1" step="0.1"></div>
          </div>
        </div>

        <!-- 9 SITES (PARRILLO) -->
        <div id="p9-sites" style="display:none">
          <div class="sep"></div>
          <div class="row3">
            <div><label for="p9_chest">Peitoral (mm)</label><input id="p9_chest" type="number" min="1" step="0.1"></div>
            <div><label for="p9_abd">Abdômen (mm)</label><input id="p9_abd" type="number" min="1" step="0.1"></div>
            <div><label for="p9_thigh">Coxa (mm)</label><input id="p9_thigh" type="number" min="1" step="0.1"></div>
            <div><label for="p9_biceps">Bíceps (mm)</label><input id="p9_biceps" type="number" min="1" step="0.1"></div>
            <div><label for="p9_triceps">Tríceps (mm)</label><input id="p9_triceps" type="number" min="1" step="0.1"></div>
            <div><label for="p9_subscap">Subescapular (mm)</label><input id="p9_subscap" type="number" min="1" step="0.1"></div>
            <div><label for="p9_supra">Supra-ilíaca (mm)</label><input id="p9_supra" type="number" min="1" step="0.1"></div>
            <div><label for="p9_lowback">Lombar (mm)</label><input id="p9_lowback" type="number" min="1" step="0.1"></div>
            <div><label for="p9_calf">Panturrilha (mm)</label><input id="p9_calf" type="number" min="1" step="0.1"></div>
          </div>
          <div class="tiny">Obs.: 9 dobras usa o método de <b>Parrillo</b>. Se você preferir apenas as fórmulas Jackson–Pollock, escolha a aba "Pollock 7 dobras".</div>
        </div>

        <div class="actions">
          <button class="primary" id="calcBtn">Calcular</button>
          <button id="resetBtn">Limpar</button>
          <button id="copyBtn">Copiar resultado</button>
        </div>
        <div id="msg" class="tiny"></div>
      </section>

      <aside class="card">
        <h2>Resultados</h2>
        <div class="kpi"><div>% Gordura</div><div class="v" id="bf">—</div></div>
        <div class="kpi"><div>Massa gorda</div><div class="v" id="fm">—</div></div>
        <div class="kpi"><div>Massa magra</div><div class="v" id="lbm">—</div></div>
        <div class="kpi"><div>Classificação</div><div class="v" id="classif">—</div></div>
        <div class="sep"></div>
        <div class="tiny">Notas:
          <ul>
            <li>Pollock 7 calcula <em>densidade corporal</em> e converte via Siri: %BF = 495/BD − 450.</li>
            <li>9 dobras: fórmula de Parrillo — %BF = (27 × soma das 9 dobras em mm) ÷ peso (em libras).</li>
          </ul>
        </div>
      </aside>
    </div>
  </div>

  <script>
    const $ = (q)=>document.querySelector(q);
    const $$ = (q)=>document.querySelectorAll(q);

    // Tabs
    let method = 'jp7';
    $$('#methodTabs .tab').forEach(tab=>{
      tab.addEventListener('click',()=>{
        $$('#methodTabs .tab').forEach(t=>t.classList.remove('active'));
        tab.classList.add('active');
        method = tab.dataset.method;
        $('#jp7-sites').style.display = method==='jp7' ? '' : 'none';
        $('#p9-sites').style.display  = method==='p9'  ? '' : 'none';
        setMsg('');
      });
    });

    function parse(v){ const n = parseFloat(v); return Number.isFinite(n) ? n : null; }
    const kg2lb = kg => kg*2.20462262185;
    const round1 = x => Math.round(x*10)/10;

    function siriPercentFromDensity(d){ return (495/d) - 450; }

    function classifyBF(sex, bf){
      // Tabela ACE (genérica) — faixas amplas
      if(sex==='male'){
        if(bf<6) return 'Essencial';
        if(bf<14) return 'Atleta';
        if(bf<18) return 'Fitness';
        if(bf<25) return 'Médio';
        return 'Alto';
      } else {
        if(bf<14) return 'Essencial';
        if(bf<21) return 'Atleta';
        if(bf<25) return 'Fitness';
        if(bf<32) return 'Médio';
        return 'Alto';
      }
    }

    function calcJP7(sex, age){
      const s = ['chest','axilla','triceps','subscap','abd','supra','thigh']
        .map(k=>parse($('#jp7_'+k).value)||0)
        .reduce((a,b)=>a+b,0);
      if(s<=0) throw new Error('Informe as 7 dobras em mm.');
      let bd;
      if(sex==='male'){
        bd = 1.112 - 0.00043499*s + 0.00000055*s*s - 0.00028826*age; // Jackson & Pollock 1978
      } else {
        bd = 1.097 - 0.00046971*s + 0.00000056*s*s - 0.00012828*age; // Jackson, Pollock & Ward 1980
      }
      return siriPercentFromDensity(bd);
    }

    function calcP9(weightKg){
      const s = ['chest','abd','thigh','biceps','triceps','subscap','supra','lowback','calf']
        .map(k=>parse($('#p9_'+k).value)||0)
        .reduce((a,b)=>a+b,0);
      if(s<=0) throw new Error('Informe as 9 dobras em mm.');
      const weightLb = kg2lb(weightKg);
      return (27 * s) / weightLb; // Parrillo
    }

    function compute(){
      const sex = $('#sex').value;
      const age = parse($('#age').value);
      const weight = parse($('#weight').value);
      if(!weight) throw new Error('Preencha o peso (kg).');
      if(method==='jp7' && !age) throw new Error('Para Pollock 7, preencha a idade.');

      let bf;
      if(method==='jp7') bf = calcJP7(sex, age);
      else bf = calcP9(weight);

      const fm = weight * (bf/100);
      const lbm = weight - fm;
      const cls = classifyBF(sex, bf);
      return { bf, fm, lbm, cls };
    }

    function render(r){
      $('#bf').textContent = Number.isFinite(r?.bf) ? round1(r.bf)+' %' : '—';
      $('#fm').textContent = Number.isFinite(r?.fm) ? round1(r.fm)+' kg' : '—';
      $('#lbm').textContent = Number.isFinite(r?.lbm) ? round1(r.lbm)+' kg' : '—';
      $('#classif').textContent = r?.cls || '—';
    }

    function setMsg(txt, ok=false){
      const el=$('#msg'); el.textContent=txt||''; el.className = 'tiny ' + (ok?'ok':'warn');
    }

    $('#calcBtn').addEventListener('click',()=>{
      try{ const r = compute(); render(r); setMsg('Cálculo concluído.', true);} catch(e){ render(null); setMsg(e.message,false);} });
    $('#resetBtn').addEventListener('click',()=>{ document.querySelectorAll('input').forEach(i=>i.value=''); render(null); setMsg(''); });
    $('#copyBtn').addEventListener('click',()=>{
      const txt = `Resultado — ${new Date().toLocaleDateString('pt-BR')}\nMétodo: ${method==='jp7'?'Pollock 7 dobras':'9 dobras (Parrillo)'}\n%BF: ${$('#bf').textContent}\nMassa gorda: ${$('#fm').textContent}\nMassa magra: ${$('#lbm').textContent}\nClassificação: ${$('#classif').textContent}`;
      navigator.clipboard?.writeText(txt).then(()=>setMsg('Copiado.',true)).catch(()=>setMsg('Não foi possível copiar.'));
    });
  </script>
</body>
</html>